<template>
    <template if:true={showAppointmentScreen}>
        <div class="table-container">
            <div class="datatable-wrapper">
                <lightning-datatable
                        class="slds-table_striped slds-cell-wrap"
                        columns={columns}
                        data={serviceAppointments}
                        key-field="Id"
                        max-row-selection="1"
                        wrap-text-max-lines="3"
                        onrowselection={handleRowSelection}>
                </lightning-datatable>
            </div>
        </div>
    </template>
    <div if:true={showBottomFooter} class="footer">
        <div class="footer-content">
            <div class="footer-buttons">
                <lightning-button
                        label="Back to Main Menu"
                        icon-name="utility:home"
                        variant="brand"
                        class="slds-m-right_small"
                        onclick={handleBack}>
                </lightning-button>
                <lightning-button-group>
                    <lightning-button
                            if:true={showAppointmentScreen}
                            label="Continue"
                            icon-name="utility:forward"
                            variant="neutral"
                            disabled={disableNextButton}
                            onclick={handleSelect}>
                    </lightning-button>
                </lightning-button-group>
            </div>
        </div>
    </div>
    <template if:true={showRecordForm}>
        <lightning-record-edit-form
                onsuccess={handleTimesheetCreated}
                record-id={timesheetEntryId}
                object-api-name="TimeSheetEntry">
            <div class="slds-grid slds-grid_vertical slds-p-around_small">
                <div class="slds-col">
                    <lightning-input-field
                            field-name="TimeSheetId"
                            value={timeSheetId}
                            class="slds-hide"
                    >
                    </lightning-input-field>

                    <lightning-input-field
                            field-name="StartTime"
                            value={startDate}
                            onchange={handleStartTimeChange}
                            required
                            class="form-element"
                    >
                    </lightning-input-field>

                    <lightning-input-field
                            field-name="EndTime"
                            value={endDate}
                            onchange={handleEndTimeChange}
                            required
                            class="form-element"
                    >
                    </lightning-input-field>

                    <lightning-input-field
                            field-name="Type"
                            required
                            class="form-element"
                    >
                    </lightning-input-field>

                    <lightning-input-field field-name="Subject" class="form-element">
                    </lightning-input-field>

                    <div class="slds-form-element slds-m-top_medium">
                        <label class="slds-form-element__label">
                            <abbr class="slds-required" title="required">*</abbr>
                            Work Order
                        </label>
                        <div class="slds-form-element__control">
                            <div class="slds-grid slds-gutters slds-grid_vertical-align-center">
                                <div class="slds-col slds-size_2-of-4">
                                    <button class="slds-button slds-button_brand lookup-button" onclick={handleSetAppointmentClicked}>
                                        <lightning-icon
                                                icon-name="utility:search"
                                                size="xx-small"
                                                variant="inverse"
                                                class="slds-m-right_xx-small">
                                        </lightning-icon>
                                        Select Work Order
                                    </button>
                                </div>
                                <div class="slds-col slds-size_2-of-4">
                                    <lightning-input-field if:true={workOrderId}
                                                           field-name="WorkOrderId"
                                                           value={workOrderId}
                                                           variant="label-hidden">
                                    </lightning-input-field>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-m-top_medium slds-align_absolute-center">
                <lightning-button
                        class="slds-m-right_small"
                        variant="brand"
                        type="submit"
                        label="Save">
                </lightning-button>
                <lightning-button
                        variant="neutral"
                        label="Cancel"
                        onclick={handleCancel}>
                </lightning-button>
            </div>
        </lightning-record-edit-form>
    </template>
</template>
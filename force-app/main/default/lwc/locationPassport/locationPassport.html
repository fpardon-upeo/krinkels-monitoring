<!--
 - Created by Frederik on 11/21/2024.
 -->

<!-- Location Passport -->
<template>
  <div class="mobile-wrapper">
    <!-- Account Details Section -->
    <div if:true={dataLoaded}>
      <div class="mobile-card">
        <div class="mobile-header">
          <lightning-icon
            icon-name="utility:home"
            size="small"
          ></lightning-icon>
          <h2>{labels.LocationPassport_General_Information_Header}</h2>
        </div>
        <div class="mobile-list">
          <div class="mobile-list-item">
            <span class="mobile-label"
              >{labels.LocationPassport_General_Information_Account_Name_Header}</span
            >
            <span class="mobile-value">{accountData.Name}</span>
          </div>
          <div class="mobile-list-item">
            <span class="mobile-label"
              >{labels.LocationPassport_General_Information_Account_AccessInformation_Header}</span
            >
            <span class="mobile-value"
              >{accountData.Access_Information__c}</span
            >
          </div>
          <div class="mobile-list-item">
            <span class="mobile-label"
              >{labels.LocationPassport_General_Information_Account_AttentionPoints_Header}</span
            >
            <span class="mobile-value"
              >{accountData.Attention_points_for_execution__c}</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Operating Hours Section -->
    <div if:true={slotsLoaded}>
      <div class="mobile-card">
        <div class="mobile-header">
          <lightning-icon
            icon-name="utility:clock"
            size="small"
          ></lightning-icon>
          <h2>{labels.LocationPassport_Operating_Hours_Header}</h2>
        </div>
        <div class="mobile-table">
          <template if:true={timeSlots.data}>
            <div class="custom-datatable">
              <table
                class="slds-table slds-table_bordered slds-table_cell-buffer"
              >
                <thead>
                  <tr class="slds-line-height_reset">
                    <th class="slds-text-title_caps" scope="col">
                      <div class="slds-grid slds-grid_vertical-align-center">
                        <lightning-icon
                          icon-name="utility:dayview"
                          size="x-small"
                          class="slds-m-right_x-small"
                        ></lightning-icon>
                        {labels.LocationPassport_Operating_Hours_Day_Header}
                      </div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                      <div class="slds-grid slds-grid_vertical-align-center">
                        <lightning-icon
                          icon-name="utility:clock"
                          size="x-small"
                          class="slds-m-right_x-small"
                        ></lightning-icon>
                        {labels.LocationPassport_Operating_Hours_Start_Time_Header}
                      </div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                      <div class="slds-grid slds-grid_vertical-align-center">
                        <lightning-icon
                          icon-name="utility:clock"
                          size="x-small"
                          class="slds-m-right_x-small"
                        ></lightning-icon>
                        {labels.LocationPassport_Operating_Hours_End_Time_Header}
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <template for:each={timeSlots.data} for:item="slot">
                    <tr key={slot.Id}>
                      <td>{slot.DayOfWeek}</td>
                      <td>{slot.formattedStartTime}</td>
                      <td>{slot.formattedEndTime}</td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
          </template>
        </div>
      </div>
    </div>

    <!-- Feedback Section -->
    <div class="mobile-card">
      <div class="mobile-header">
        <lightning-icon
          icon-name="utility:comments"
          size="small"
        ></lightning-icon>
        <h2>{labels.LocationPassport_Feedback_Header}</h2>
      </div>
      <div class="feedback-container">
        <lightning-textarea
          name="feedback"
          label={labels.LocationPassport_Feedback_Label}
          value={feedbackText}
          onchange={handleFeedbackChange}
        >
        </lightning-textarea>
        <div class="button-container">
          <button
            onclick={handlePostFeedback}
            disabled={isPostDisabled}
            class="slds-m-top_small post-feedback-button"
          >
            {labels.LocationPassport_Feedback_Submit_Button}
          </button>
        </div>
      </div>
    </div>
  </div>
  <c-location-passport-images account-id={accountId}>
  </c-location-passport-images>
</template>